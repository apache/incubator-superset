function _extends(){return _extends=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},_extends.apply(this,arguments)}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}import{MetricKey,ExpressionType}from"../types/Metric";export var LABEL_MAX_LENGTH=43;var Metrics=/*#__PURE__*/function(){// Use Array to maintain insertion order for metrics that are order sensitive
function a(a){var b=this;_defineProperty(this,"metrics",void 0),this.metrics=[],Object.keys(MetricKey).forEach(function(c){var d=a[MetricKey[c]];d&&(Array.isArray(d)?d.forEach(function(a){return b.addMetric(a)}):b.addMetric(d))})}var b=a.prototype;return b.getMetrics=function a(){return this.metrics},b.getLabels=function a(){return this.metrics.map(function(a){return a.label})},b.addMetric=function b(a){if("string"==typeof a)this.metrics.push({label:a});else{// Note we further sanitize the metric label for BigQuery datasources
// TODO: move this logic to the client once client has more info on the
// the datasource
var c=a.label||this.getDefaultLabel(a);this.metrics.push(_extends({},a,{label:c}))}},b.getDefaultLabel=function c(a){var b;return b=a.expressionType===ExpressionType.SIMPLE?a.aggregate+"("+a.column.columnName+")":a.sqlExpression,b.length<=LABEL_MAX_LENGTH?b:b.substring(0,LABEL_MAX_LENGTH-3)+"..."},a}();export{Metrics as default};