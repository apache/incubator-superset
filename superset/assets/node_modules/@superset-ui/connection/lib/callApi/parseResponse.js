"use strict";var _jsonBigint=_interopRequireDefault(require("json-bigint"));exports.__esModule=/* force = */!0,exports.default=parseResponse;function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function rejectIfNotOkay(a){return a.ok?Promise.resolve(a):Promise.reject(a)}function parseJson(a){try{return _jsonBigint.default.parse(a)}catch(a){// if JSONbig.parse fails, it throws an object (not a proper Error), so let's re-wrap the message.
throw new Error(a.message)}}function parseResponse(a,b){void 0===b&&(b="json");var c=a.then(rejectIfNotOkay);if(null===b)return a.then(rejectIfNotOkay);if("text"===b)return c.then(function(a){return a.text().then(function(b){return{response:a,text:b}})});if("json"===b)return c.then(function(a){return a.text().then(function(b){return{json:parseJson(b),response:a}})});throw new Error("Expected parseResponse=null|json|text, got '"+b+"'.")}